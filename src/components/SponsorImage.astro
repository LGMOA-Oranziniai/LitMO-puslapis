---
import { Image } from 'astro:assets'
import type { ImageMetadata } from 'astro'

type Tier = 'Generaliniai rėmėjai' | 'Renginio partneriai' | 'Rėmėjai'

interface Props {
  img: ImageMetadata
  alt?: string
  height?: number | string
  tier?: Tier
  class?: string
}

const TIER_HEIGHT: Record<Tier, number> = {
  'Generaliniai rėmėjai': 130,
  'Renginio partneriai': 115,
  Rėmėjai: 105,
}

const { class: className, img, height, alt = 'Sponsor logo', tier } = Astro.props as Props

const fallback = 150
const rawHeight = height ?? (tier ? TIER_HEIGHT[tier] : fallback)
const cssHeight = typeof rawHeight === 'number' ? `${rawHeight}px` : (rawHeight || `${fallback}px`)
---

<div class:list={['sponsor', className]} style={`--logo-h: ${cssHeight}`} data-tier={tier}>
  <Image src={img} alt={alt} loading="lazy" decoding="async" class="sponsor_img" />
</div>

<style>
  .sponsor {
    display: grid;
    position: relative;
    place-items: center;
    padding: var(--space-s, 0.75rem);
    inline-size: 100%;
    min-block-size: var(--logo-h, 150px);
    overflow: hidden;
  }

  .sponsor_img {
    display: block;
    position: relative;
    z-index: 0;
    mix-blend-mode: normal;
    margin-inline: auto;
    max-inline-size: 100%;
    block-size: auto;
    max-block-size: calc(var(--logo-h, 150px) - 0.5rem);
    object-fit: contain;
    object-position: center;
  }
</style>